<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/strict.dtd">
<html>
<head>
<META http-equiv=Content-Type content="text/html; charset=UTF-8">
<title>Exported from Notepad++</title>
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #E0E2E4;
}
.sc0 {
}
.sc1 {
	color: #818E96;
}
.sc2 {
	color: #818E96;
}
.sc3 {
	color: #6C788C;
}
.sc4 {
	color: #FFCD22;
}
.sc5 {
	font-weight: bold;
	color: #93C763;
}
.sc6 {
	color: #EC7600;
}
.sc7 {
	color: #EC7600;
}
.sc10 {
	color: #E8E2B7;
}
.sc11 {
}
</style>
</head>
<body>
<div style="float: left; white-space: pre; line-height: 1; background: #293134; "><span class="sc1">/* Tony Florida
 * EN 605.713 Robotics
 * Johns Hopkins University
 * Midterm Project
 * Given: 29 Jan 2014
 * Due: 12 Mar 2014
 * File: robotics_midterm.js
 * Description: Main logic for Robotics midterm project
 */</span><span class="sc0">
 
</span><span class="sc3">/****************************
 *
 * Browser Set-up
 *
 ****************************/</span><span class="sc0">
 
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BROWSER_WIDTH</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BROWSER_HEIGHT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//height of canvas
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//width of canvas
</span><span class="sc0">
</span><span class="sc1">/* @brief Determine size of canvas based on width of browser window on load
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">getBroswerSize</span><span class="sc10">()</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc5">typeof</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">window</span><span class="sc10">.</span><span class="sc11">innerWidth</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc7">'number'</span><span class="sc10">)</span><span class="sc0"> 
   </span><span class="sc10">{</span><span class="sc0">
       </span><span class="sc2">//Non-IE
</span><span class="sc0">       </span><span class="sc11">BROWSER_WIDTH</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">window</span><span class="sc10">.</span><span class="sc11">innerWidth</span><span class="sc10">;</span><span class="sc0">
       </span><span class="sc11">BROWSER_HEIGHT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">window</span><span class="sc10">.</span><span class="sc11">innerHeight</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">documentElement</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">documentElement</span><span class="sc10">.</span><span class="sc11">clientWidth</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">documentElement</span><span class="sc10">.</span><span class="sc11">clientHeight</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> 
   </span><span class="sc10">{</span><span class="sc0">
       </span><span class="sc2">//IE 6+ in 'standards compliant mode'
</span><span class="sc0">       </span><span class="sc11">BROWSER_WIDTH</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">documentElement</span><span class="sc10">.</span><span class="sc11">clientWidth</span><span class="sc10">;</span><span class="sc0">
       </span><span class="sc11">BROWSER_HEIGHT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">documentElement</span><span class="sc10">.</span><span class="sc11">clientHeight</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">body</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">body</span><span class="sc10">.</span><span class="sc11">clientWidth</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">body</span><span class="sc10">.</span><span class="sc11">clientHeight</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">)</span><span class="sc0"> 
   </span><span class="sc10">{</span><span class="sc0">
       </span><span class="sc2">//IE 4 compatible
</span><span class="sc0">       </span><span class="sc11">BROWSER_WIDTH</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">body</span><span class="sc10">.</span><span class="sc11">clientWidth</span><span class="sc10">;</span><span class="sc0">
       </span><span class="sc11">BROWSER_HEIGHT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">body</span><span class="sc10">.</span><span class="sc11">clientHeight</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//make sure the width of the simulation area takes up no more than half of the window
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">BROWSER_HEIGHT</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BROWSER_WIDTH</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">BROWSER_WIDTH</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">HEIGHT_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">HEIGHT_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">BROWSER_HEIGHT</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end getBrowserSize
</span><span class="sc0">
</span><span class="sc11">getBroswerSize</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc3">/****************************
 *
 * Global Variables
 *
 ****************************/</span><span class="sc0">
 
</span><span class="sc2">//state variables
</span><span class="sc0"> </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//state of animation
</span><span class="sc0"> </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">state</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"loaded"</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">//control variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">ORIENTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">//tracking variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//global vehicle x coordinate
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//global vehicle y coordinate
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CANVAS_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//canvas vehicle x coordinate
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CANVAS_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//canvas vehicle y coordinate
</span><span class="sc0">
</span><span class="sc2">//requirements
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">MAX_SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">15</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//ft per second
</span><span class="sc0"> 
</span><span class="sc2">//canvas variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">WIDTH_FT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">10</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//simulated width of canvas in feet
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">HEIGHT_FT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">20</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//simulated height of canvas in feet
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">FT_2_CELL</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//2 cells make up a foot
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">NUM_VERT_GRIDS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">WIDTH_FT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">FT_2_CELL</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of vertical grid-lines
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">NUM_HORIZ_GRIDS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">HEIGHT_FT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">FT_2_CELL</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of horizontal grid-lines
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//vehcile width ft
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">4</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//vehicle height ft
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc10">*</span><span class="sc11">FT_2_CELL</span><span class="sc10">*(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc11">NUM_VERT_GRIDS</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//width pixels
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">*</span><span class="sc11">FT_2_CELL</span><span class="sc10">*(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc11">NUM_VERT_GRIDS</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//height pixels
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1000</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of milliseconds in a second
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//center of canvas x
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//center of canvas y
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">DEG_IN_CIRCLE</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">360</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//degrees in a circle
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">NUM_DEC_PLACES</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of decimals places to show
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//used to determine which quadrant
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//used to determine which quadrant
</span><span class="sc0">
</span><span class="sc2">//waypoint variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">waypointCols</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc6">"pointX"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"pointY"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"time"</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc6">"orientation"</span><span class="sc10">];</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">cur_waypoint</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">MAX_WAYPOINTS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">//mecanum variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0.25</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//wheel radius in feet
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CIRCUMFERENCE</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">RADIUS</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">PI</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">FT_TRAVELED_PER_RADIAN</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc4">180</span><span class="sc10">/</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">PI</span><span class="sc10">)/</span><span class="sc4">360</span><span class="sc10">)*</span><span class="sc11">CIRCUMFERENCE</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">inverse_kinematic</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[[</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">-(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)],</span><span class="sc0">
                         </span><span class="sc10">[-</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc10">(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)],</span><span class="sc0">
                         </span><span class="sc10">[-</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">-(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)],</span><span class="sc0">
                         </span><span class="sc10">[</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc10">(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)]];</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">forward_kinematic</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[[</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0">
                         </span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0">
                         </span><span class="sc10">[-(</span><span class="sc4">1</span><span class="sc10">/(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)),</span><span class="sc0">
                           </span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">/(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)),</span><span class="sc0">
                          </span><span class="sc10">-(</span><span class="sc4">1</span><span class="sc10">/(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">)),</span><span class="sc0">
                           </span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">/(</span><span class="sc11">VEHICLE_WIDTH_FT</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_FT</span><span class="sc10">))]];</span><span class="sc0">

</span><span class="sc2">//path variables
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">cur_loop</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">loops</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
                           
</span><span class="sc2">//single stage that contains the grid and vehicle
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">stage</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Stage</span><span class="sc10">({</span><span class="sc0">
  </span><span class="sc11">container</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'container'</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc0">
</span><span class="sc10">});</span><span class="sc0">

</span><span class="sc2">//the layer of the vehicle
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">vehicleLayer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Layer</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pathLayer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Layer</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">waypointLayer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Layer</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">//the vehicle shape
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Rect</span><span class="sc10">({</span><span class="sc0">
  </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">,</span><span class="sc0">
  </span><span class="sc11">offset</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">x</span><span class="sc10">:</span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//set center as vehicle reference
</span><span class="sc10">});</span><span class="sc0"> </span><span class="sc2">//end rect
</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BUFFER</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">3</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//if vehicle is within this number of feet, the view will center
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BOUNDS_LEFT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//left edge of the canvas
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BOUNDS_RIGHT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//right edge of the canvas
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BOUNDS_TOP</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//top edge of the canvas
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">BOUNDS_BOTTOM</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//bottom edge of the canvas
</span><span class="sc0">
</span><span class="sc2">//brx=bounds right x, bty=bounds top y, etc
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">brx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">bry</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">blx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">bly</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0">  </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">btx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">bty</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">bbx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">bby</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc3">/****************************
 *
 * Debug
 *
 ****************************/</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
 
</span><span class="sc2">//draw bounds markers
</span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Rect</span><span class="sc10">({</span><span class="sc0">
     </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">brx</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">bry</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">fill</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Rect</span><span class="sc10">({</span><span class="sc0">
     </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">blx</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">bly</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">fill</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">c</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Rect</span><span class="sc10">({</span><span class="sc0">
     </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">btx</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">bty</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">fill</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">d</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Rect</span><span class="sc10">({</span><span class="sc0">
     </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">bbx</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">bby</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">width</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">height</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">5</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">fill</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   
   </span><span class="sc11">vehicleLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">vehicleLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">b</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">vehicleLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">c</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">vehicleLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">d</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end debug
</span><span class="sc0">
</span><span class="sc3">/****************************
 *
 * Paths
 *
 ****************************/</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">frames</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of frames executed
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">NEW_POINT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//draw new point every NEW_POINT frames
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//toggle to detect when view was recentered
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">PATH_LEN</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1000000</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//length of path to be executed
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pathx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pathy</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc2">//path that has been traveled
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">done</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Line</span><span class="sc10">({</span><span class="sc0">
   </span><span class="sc11">points</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">],</span><span class="sc0">
   </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'red'</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">6</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc11">lineCap</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc10">,</span><span class="sc0">
   </span><span class="sc11">lineJoin</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc0">
</span><span class="sc10">});</span><span class="sc0">

</span><span class="sc1">/* @brief Draw the path that the vehicle has already traveled
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawPrevPath</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">points</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">getPoints</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">points</span><span class="sc10">[</span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">-</span><span class="sc4">2</span><span class="sc10">]=</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathx</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// new x point 
</span><span class="sc0">   </span><span class="sc11">points</span><span class="sc10">[</span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">]=</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathy</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">// new y point
</span><span class="sc0">   </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">setPoints</span><span class="sc10">(</span><span class="sc11">points</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Draw the path that the vehicle has already traveled for a circle
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawPrevPathCircle</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">points</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">getPoints</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathx</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new x point 
</span><span class="sc0">   </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathy</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new y point
</span><span class="sc0">   </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">setPoints</span><span class="sc10">(</span><span class="sc11">points</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Draw path for vref and mecanum
 * @param dir Direction in degrees
 * @param speed Speed in ft / sec
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawPathToBeExec</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">speed</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speed</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">toBeExecuted</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Line</span><span class="sc10">({</span><span class="sc0">
            </span><span class="sc11">points</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">PATH_LEN</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">))),</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">PATH_LEN</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">dir</span><span class="sc10">)))],</span><span class="sc0">
            </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
            </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0">
            </span><span class="sc11">lineCap</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc10">,</span><span class="sc0">
            </span><span class="sc11">lineJoin</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc0">
         </span><span class="sc10">});</span><span class="sc0">

         </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">toBeExecuted</span><span class="sc10">);</span><span class="sc0">
         </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
         
         </span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end drawPathToBeExec
</span><span class="sc0">

</span><span class="sc1">/* @brief Draw path for vref and mecanum
 * @param rad Radius of circle in feet
 * @param inc Inclination of radius in degrees
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawPathToBeExecCircle</span><span class="sc10">(</span><span class="sc11">rad</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">inc</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">circle</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Circle</span><span class="sc10">({</span><span class="sc0">
     </span><span class="sc11">x</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">y</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">radius</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">rad</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
     </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   
   </span><span class="sc11">inc</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//realign coordinate systems
</span><span class="sc0">   </span><span class="sc11">circle</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">inc</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">rad</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">circle</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(-</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">inc</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">rad</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">circle</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end drawPathToBeExec
</span><span class="sc0">
</span><span class="sc1">/* @brief Draw waypoint path
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawPointsPathToBeExec</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pts</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">//way points as coordinates
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0"> 
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">to</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">coordFt2Px</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//coordinates
</span><span class="sc0">      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">toX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">to</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">//x in px
</span><span class="sc0">      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">toY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">to</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">//y in px
</span><span class="sc0">      </span><span class="sc11">pts</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">toX</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">pts</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">toY</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">toBeExecuted</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Line</span><span class="sc10">({</span><span class="sc0">
      </span><span class="sc11">points</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc11">pts</span><span class="sc10">,</span><span class="sc0">
      </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'green'</span><span class="sc10">,</span><span class="sc0">
      </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0">
      </span><span class="sc11">lineCap</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc10">,</span><span class="sc0">
      </span><span class="sc11">lineJoin</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'round'</span><span class="sc0">
   </span><span class="sc10">});</span><span class="sc0">
   
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">toBeExecuted</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">

</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end drawPointsPathToBeExec
</span><span class="sc0">
</span><span class="sc3">/****************************
 *
 * Animations
 *
 ****************************/</span><span class="sc0">
 
</span><span class="sc1">/* @brief The main animation object that moves the vehicle reference point
 */</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">anim</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Animation</span><span class="sc10">(</span><span class="sc5">function</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//update time
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_time"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc10">/</span><span class="sc11">SECOND_MS</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//determine x component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//determine y component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//move the vehicle
</span><span class="sc0">   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
      
   </span><span class="sc2">//draw path traveled
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">frames</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">NEW_POINT</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">drawPrevPath</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">frames</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc11">frames</span><span class="sc10">++;</span><span class="sc0">
   
   </span><span class="sc2">//update global vehicle coordinates
</span><span class="sc0">   </span><span class="sc11">CANVAS_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">CANVAS_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">abs</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">));</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic coordinates text on the page
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"x_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_X</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"y_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=-(</span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_Y</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//rotate the vehicle
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">angleDiff</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">;</span><span class="sc0">     
      </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">rotate</span><span class="sc10">(</span><span class="sc11">angleDiff</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic vehicle rotation
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_rot"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotationDeg</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc11">DEG_IN_CIRCLE</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//check to see if view needs to be repositioned
</span><span class="sc0">   </span><span class="sc11">checkRepositionView</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc10">},</span><span class="sc0"> </span><span class="sc11">vehicleLayer</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//end anim 
</span><span class="sc0">

</span><span class="sc1">/* @brief The main animation object that moves the vehicle in a circle
 */</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">animCircle</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Animation</span><span class="sc10">(</span><span class="sc5">function</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//update time
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_time"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc10">/</span><span class="sc11">SECOND_MS</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//set direction based on time
</span><span class="sc0">   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">360</span><span class="sc10">/</span><span class="sc11">TIME</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//determine x component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//determine y component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//move the vehicle
</span><span class="sc0">   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//draw path traveled
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">frames</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">NEW_POINT</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">drawPrevPathCircle</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">frames</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc11">frames</span><span class="sc10">++;</span><span class="sc0">
   
   </span><span class="sc2">//update global vehicle coordinates
</span><span class="sc0">   </span><span class="sc11">CANVAS_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">CANVAS_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">abs</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">))</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic coordinates text on the page
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"x_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_X</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"y_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=-(</span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_Y</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//rotate the vehicle
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">angleDiff</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">;</span><span class="sc0">     
      </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">rotate</span><span class="sc10">(</span><span class="sc11">angleDiff</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic vehicle rotation
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_rot"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotationDeg</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc11">DEG_IN_CIRCLE</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//check to see if view needs to be repositioned
</span><span class="sc0">   </span><span class="sc11">checkRepositionView</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//check to see if the vehicle has reached it's destination
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animPointExecution</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"done"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Finished, Reload"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      
      </span><span class="sc2">//execute another waypoint if need be
</span><span class="sc0">      </span><span class="sc11">cur_loop</span><span class="sc10">++;</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">cur_loop</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">loops</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">circleExecution</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">animCircle</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc10">},</span><span class="sc0"> </span><span class="sc11">vehicleLayer</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//end animCircle
</span><span class="sc0">
</span><span class="sc1">/* @brief The main animation object for point execution
 */</span><span class="sc0">
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">animPointExecution</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Animation</span><span class="sc10">(</span><span class="sc5">function</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//update time
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_time"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc10">/</span><span class="sc11">SECOND_MS</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//determine x component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">((</span><span class="sc11">speedX</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">));</span><span class="sc0">
   
   </span><span class="sc2">//determine y component of speed value
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">*((</span><span class="sc11">speedY</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">));</span><span class="sc0">

   </span><span class="sc2">//move the vehicle
</span><span class="sc0">   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//draw path traveled
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">frames</span><span class="sc0"> </span><span class="sc10">&gt;=</span><span class="sc0"> </span><span class="sc11">NEW_POINT</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">drawPrevPath</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">frames</span><span class="sc10">=</span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc11">frames</span><span class="sc10">++;</span><span class="sc0">
   
   </span><span class="sc2">//update global vehicle coordinates
</span><span class="sc0">   </span><span class="sc11">CANVAS_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">CANVAS_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic coordinates text on the page
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"x_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_X</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"y_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=-(</span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CANVAS_Y</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//rotate the vehicle
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">angleDiff</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">timeDiff</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">;</span><span class="sc0">     
      </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">rotate</span><span class="sc10">(</span><span class="sc11">angleDiff</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//update the diagnostic vehicle rotation
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_rot"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotationDeg</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">%</span><span class="sc0"> </span><span class="sc11">DEG_IN_CIRCLE</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//check to see if view needs to be repositioned
</span><span class="sc0">   </span><span class="sc11">checkRepositionView</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//check to see if the vehicle has reached it's destination
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">SECOND_MS</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animPointExecution</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"done"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Finished, Reload"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">frame</span><span class="sc10">.</span><span class="sc11">time</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      
      </span><span class="sc2">//execute another waypoint if need be
</span><span class="sc0">      </span><span class="sc11">cur_waypoint</span><span class="sc10">++;</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">cur_waypoint</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">pointExecution</span><span class="sc10">(</span><span class="sc5">true</span><span class="sc10">);</span><span class="sc0">
         
         </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">points</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">getPoints</span><span class="sc10">();</span><span class="sc0">
         </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">newX</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new x point 
</span><span class="sc0">         </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">newY</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new y point
</span><span class="sc0">         </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">setPoints</span><span class="sc10">(</span><span class="sc11">points</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">},</span><span class="sc0"> </span><span class="sc11">vehicleLayer</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//end animPointExecution 
</span><span class="sc0">

</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">resetAnim</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Animation</span><span class="sc10">(</span><span class="sc5">function</span><span class="sc10">(</span><span class="sc11">frame</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">CENTER_Y</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">rotation</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">},</span><span class="sc0"> </span><span class="sc11">vehicleLayer</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//end resetAnim
</span><span class="sc0">
</span><span class="sc3">/****************************
 *
 * Functions
 *
 ****************************/</span><span class="sc0">
 
 </span><span class="sc1">/* @brief Draws the grid-lines on the canvas
  */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawGridlines</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">gridLayer</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Layer</span><span class="sc10">();</span><span class="sc0">

   </span><span class="sc2">//draw horizontal grid-lines
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc11">NUM_VERT_GRIDS</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">col</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">*(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc11">NUM_VERT_GRIDS</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">line</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Line</span><span class="sc10">({</span><span class="sc0">
        </span><span class="sc11">points</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">col</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">col</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">HEIGHT_PX</span><span class="sc10">],</span><span class="sc0">
        </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
        </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc0">
      </span><span class="sc10">});</span><span class="sc0">
      </span><span class="sc11">gridLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">line</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//draw vertical grid-lines
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc11">NUM_HORIZ_GRIDS</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">row</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">*(</span><span class="sc11">HEIGHT_PX</span><span class="sc10">/</span><span class="sc11">NUM_HORIZ_GRIDS</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">line</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Kinetic</span><span class="sc10">.</span><span class="sc11">Line</span><span class="sc10">({</span><span class="sc0">
        </span><span class="sc11">points</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">row</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">WIDTH_PX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">row</span><span class="sc10">],</span><span class="sc0">
        </span><span class="sc11">stroke</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc7">'black'</span><span class="sc10">,</span><span class="sc0">
        </span><span class="sc11">strokeWidth</span><span class="sc10">:</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc0">
      </span><span class="sc10">});</span><span class="sc0">
      </span><span class="sc11">gridLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">line</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc11">stage</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">gridLayer</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end drawGridlines
</span><span class="sc0">
</span><span class="sc1">/* @brief Adds the vehicle to the canvas
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">drawVehicle</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">// add the shape to the layer
</span><span class="sc0">   </span><span class="sc11">vehicleLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//put vehicle in the center
</span><span class="sc0">   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">// add the layer to the stage
</span><span class="sc0">   </span><span class="sc11">stage</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">vehicleLayer</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end drawVehicle
</span><span class="sc0">
</span><span class="sc1">/* @brief Action taken when the Go button is pressed for vehicle reference 
 * point
 * @param direction The value that the user entered for direction
 * @param speed The value that the user entered for speed
 * @param rotation the value that the user entered for rotation
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">goPressed</span><span class="sc10">(</span><span class="sc11">direction</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">speed</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">rotation</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc11">reset</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInput</span><span class="sc10">(</span><span class="sc11">direction</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">speed</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">rotation</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animate</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end goPressed
</span><span class="sc0">
</span><span class="sc1">/* @brief Action taken when the Go button is pressed for mecanum wheel mode
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">mecanumExecution</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc11">reset</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//get user input
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"w"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateMecanum</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animateMecanum</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end mecanumExecution
</span><span class="sc0">
</span><span class="sc1">/* @brief Action taken when the Go button is pressed for circle mode
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">circleExecution</span><span class="sc10">(</span><span class="sc11">figure8Mode</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//figure 8 mode
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">figure8Mode</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
      
      </span><span class="sc2">//validate and add loop data to array
</span><span class="sc0">      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc6">"done"</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//validate first loop of figure 8
</span><span class="sc0">         </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_1_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0"> 
         </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInputCircle</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc2">//fill in input
</span><span class="sc0">            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_1_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">loops</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">([</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">]);</span><span class="sc0">
            
            </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseFloat</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//adjust direction to align with vehicle coordinate system
</span><span class="sc0">            </span><span class="sc11">drawPathToBeExecCircle</span><span class="sc10">(</span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
         </span><span class="sc5">else</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
         
         </span><span class="sc2">//validate second loop of figure 8
</span><span class="sc0">         </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_2_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0"> 
         </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInputCircle</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc2">//fill in input
</span><span class="sc0">            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_2_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
            </span><span class="sc11">loops</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">([</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">]);</span><span class="sc0">
            
            </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseFloat</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">//adjust direction to align with vehicle coordinate system
</span><span class="sc0">            </span><span class="sc11">drawPathToBeExecCircle</span><span class="sc10">(</span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
         </span><span class="sc5">else</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end pre animation check
</span><span class="sc0">      
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">animateCircle</span><span class="sc10">(</span><span class="sc11">loops</span><span class="sc10">[</span><span class="sc11">cur_loop</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">loops</span><span class="sc10">[</span><span class="sc11">cur_loop</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc2">//single circle mode
</span><span class="sc0">   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInputCircle</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//fill in input
</span><span class="sc0">         </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"circle_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
         
         </span><span class="sc2">//draw path
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseFloat</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//adjust direction to align with vehicle coordinate system
</span><span class="sc0">         </span><span class="sc11">drawPathToBeExecCircle</span><span class="sc10">(</span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
         
         </span><span class="sc11">animateCircle</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">


</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end circleExecution
</span><span class="sc0">
</span><span class="sc1">/* @brief Action taken when the Go button is pressed for rectangle mode
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">rectangleExecution</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc11">reset</span><span class="sc10">();</span><span class="sc0">

   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInputRectangle</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animateRectangle</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end rectangleExecution
</span><span class="sc0">
</span><span class="sc1">/* @brief Action taken when the Go button is pressed for point 
 * execution
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">pointExecution</span><span class="sc10">(</span><span class="sc11">waypointMode</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">waypointMode</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">//animate
</span><span class="sc0">      </span><span class="sc11">animatePointExecution</span><span class="sc10">(</span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">3</span><span class="sc10">]);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">//add valid waypoint
</span><span class="sc0">      </span><span class="sc11">validateWaypoint</span><span class="sc10">();</span><span class="sc0">
      
      </span><span class="sc2">//animate
</span><span class="sc0">      </span><span class="sc11">animatePointExecution</span><span class="sc10">(</span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc11">cur_waypoint</span><span class="sc10">][</span><span class="sc4">3</span><span class="sc10">]);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end pointExecution
</span><span class="sc0">
</span><span class="sc1">/* @brief Validate waypoint
 * destination
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateWaypoint</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//check for max waypoints entered
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">MAX_WAYPOINTS</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc7">'pointX'</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc7">'pointY'</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc7">'time'</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">ORIENTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc7">'orientation'</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
      
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">validateUserInputPointExecution</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">determineWaypointData</span><span class="sc10">(</span><span class="sc11">X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">ORIENTATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">addWaypoint</span><span class="sc10">();</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Sorry but you can only enter a max of "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">MAX_WAYPOINTS</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" waypoints."</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateWaypoint
</span><span class="sc0">
</span><span class="sc1">/* @brief Add waypoint
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">addWaypoint</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//get the waypoint table element
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">table</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"waypoints"</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//create an empty &lt;tr&gt; element and add it to the 1st position of the table:
</span><span class="sc0">   </span><span class="sc2">//plus one to start after table header row
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">row</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">table</span><span class="sc10">.</span><span class="sc11">insertRow</span><span class="sc10">(</span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//array to hold waypoint
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">waypoint</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
   
   </span><span class="sc2">//add the waypoint
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">waypointCols</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">cell</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">row</span><span class="sc10">.</span><span class="sc11">insertCell</span><span class="sc10">(</span><span class="sc11">i</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc2">//get the data from the validated form
</span><span class="sc0">      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseInt</span><span class="sc10">(</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc11">waypointCols</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]).</span><span class="sc11">value</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">cell</span><span class="sc10">.</span><span class="sc11">innerHTML</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">data</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">waypoint</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">data</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc11">pushAndDrawWaypoint</span><span class="sc10">(</span><span class="sc11">waypoint</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end addWaypoint
</span><span class="sc0">
</span><span class="sc1">/* @brief Push the waypoint to the array and draw it on the screen
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">pushAndDrawWaypoint</span><span class="sc10">(</span><span class="sc11">waypoint</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//clear path
</span><span class="sc0">   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">removeChildren</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//add the waypoint to the array of waypoints
</span><span class="sc0">   </span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">waypoint</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">drawPointsPathToBeExec</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Validate user input
 * @param direction The value that the user entered for direction
 * @param speed The value that the user entered for speed
 * @param rotation the value that the user entered for rotation
 */</span><span class="sc0">
 </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateUserInput</span><span class="sc10">(</span><span class="sc11">direction</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">speed</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">rotation</span><span class="sc10">)</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">direction</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for direction"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">speed</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for speed"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">rotation</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for rotation"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//max speed is 15
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speed</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">MAX_SPEED</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Max value for speed is 15"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//check negatives
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speed</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Speed cannot be negative"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">direction</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">direction</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">speed</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">speed</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">rotation</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">rotation</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//fill in input
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"direction"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">direction</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"speed"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">speed</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rotation"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">rotation</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateUserInput
</span><span class="sc0">
</span><span class="sc1">/* @brief Validate user input for circle mode
 */</span><span class="sc0">
 </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateUserInputCircle</span><span class="sc10">()</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for radius)"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for inclination"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for time"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//check negatives
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Radius cannot be negative"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Time must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">TIME</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateUserInputCircle
</span><span class="sc0"> 
 </span><span class="sc1">/* @brief Validate user input for figure 8
 */</span><span class="sc0">
 </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateUserInputFigure8</span><span class="sc10">()</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_1_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_2_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION2</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for radius)"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">INCLINATION2</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for inclination"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for time"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//check negatives
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Radius must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Time must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">INCLINATION2</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">INCLINATION2</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">TIME</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//fill in input
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_1_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_2_rad"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS2</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"fig8_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateUserInputFigure8
</span><span class="sc0"> 
 </span><span class="sc1">/* @brief Validate user input for circle mode
 */</span><span class="sc0">
 </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateUserInputRectangle</span><span class="sc10">()</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_w"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_h"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0">  </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for width)"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for height)"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for inclination"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for time"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//check negatives
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Width must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Height must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Time must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">RECT_W</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">RECT_H</span><span class="sc10">)</span><span class="sc0">
   
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">TIME</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//fill in input
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_w"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">RECT_W</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_h"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">RECT_H</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateUserInputRectangle
</span><span class="sc0"> 
</span><span class="sc1">/* @brief Validate user input for point execution mode
 */</span><span class="sc0">
 </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateUserInputPointExecution</span><span class="sc10">()</span><span class="sc0">
 </span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">X</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for x"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">Y</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for y"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for time"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">ORIENTATION</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for orientation"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//check negatives
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">&lt;=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Time must be positive"</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">X</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">Y</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">TIME</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">ORIENTATION</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">ORIENTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//fill in input
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"pointX"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">X</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"pointY"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">Y</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"time"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"orientation"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">ORIENTATION</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
 </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateUserInputPointExecution
</span><span class="sc0"> 
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">validateMecanum</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Boolean</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//check for numeric input
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">isNaN</span><span class="sc10">(</span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]))</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please enter a valid value for wheel "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">));</span><span class="sc0">
         </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//set defaults
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(!</span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">])</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//fill in input
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"w"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">)).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end validateMecanum
</span><span class="sc0"> 
</span><span class="sc1">/* @brief Animate the vehicle in vehicle reference point mode
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">animate</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//get validated values from form
</span><span class="sc0">   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseInt</span><span class="sc10">(</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"direction"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseInt</span><span class="sc10">(</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"speed"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseInt</span><span class="sc10">(</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rotation"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//adjust angles so that vehicle and global coordinate systems line up
</span><span class="sc0">   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">-=</span><span class="sc0"> </span><span class="sc4">90</span><span class="sc10">;</span><span class="sc0">   
   
   </span><span class="sc2">//draw path to be executed
</span><span class="sc0">   </span><span class="sc11">drawPathToBeExec</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//set state of animation to animating
</span><span class="sc0">   </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"vref"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">anim</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Animating Vehicle Reference Point"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_speed"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">SPEED</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end animate
</span><span class="sc0">
</span><span class="sc1">/* @brief Animate the vehicle in mecanum mode 
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">animateMecanum</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">forwardKinematic</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vw</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">];</span><span class="sc0">
   
   </span><span class="sc2">//rotation in degrees
</span><span class="sc0">   </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">toDegrees</span><span class="sc10">(</span><span class="sc11">Vw</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"Vx: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Vx</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"Vy: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"Vw: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Vw</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"dg: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">toDegrees</span><span class="sc10">(</span><span class="sc11">Vw</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//determine velocity using Pythagoras' Theorem
</span><span class="sc0">   </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">Vy</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">));</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speedLimit</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//avoid dividing by negative
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is movement in both x and y direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">toDegrees</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">Vy</span><span class="sc10">/</span><span class="sc11">Vx</span><span class="sc10">));</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is only movement in the x direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is only movement in the y direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">toDegrees</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">Vy</span><span class="sc10">/</span><span class="sc11">Vx</span><span class="sc10">));</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is no movement
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//adjust for upper-left origin canvas coordinate system
</span><span class="sc0">   </span><span class="sc11">setSignMecanum</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"DIR: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//draw path to be executed
</span><span class="sc0">   </span><span class="sc11">drawPathToBeExec</span><span class="sc10">(</span><span class="sc11">DIRECTION</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//set state of animation to animating
</span><span class="sc0">   </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"mecanum"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">anim</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Animating Wheel Mecanum mode"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_speed"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">SPEED</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end animateMecanum
</span><span class="sc0">
</span><span class="sc1">/* @brief Animate the vehicle in a circle
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">animateCircle</span><span class="sc10">(</span><span class="sc11">rad</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">inc</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rad</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">inc</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseFloat</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//adjust direction to align with vehicle coordinate system
</span><span class="sc0">
   </span><span class="sc2">//calculated distance and speed
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">circumference</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">PI</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">circumference</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"CIRCLE_RADIUS: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"INCLINATION: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"TIME: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"SPEED: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"circumference: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">circumference</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speedLimit</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">//set state of animation to animating
</span><span class="sc0">      </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">animCircle</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Animating Circle"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_speed"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">SPEED</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end animateCircle
</span><span class="sc0">
</span><span class="sc1">/* @brief Animate the vehicle in a rectangle
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">animateRectangle</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_w"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_h"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_inc"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rect_sec"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">;</span><span class="sc0">
   
    </span><span class="sc2">//calculated distance and time per side
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">time_side</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[(</span><span class="sc11">RECT_H</span><span class="sc10">/</span><span class="sc11">distance</span><span class="sc10">)*</span><span class="sc11">TIME</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">/</span><span class="sc11">distance</span><span class="sc10">)*</span><span class="sc11">TIME</span><span class="sc10">];</span><span class="sc0"> </span><span class="sc2">//height, width
</span><span class="sc0">   
   </span><span class="sc2">//trig
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">hyp</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">));</span><span class="sc0"> </span><span class="sc2">//hypotenuse of rectangle
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">theta</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc10">/</span><span class="sc11">RECT_W</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">alpha</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">theta</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">omega</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">/</span><span class="sc11">RECT_H</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">beta</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0">  </span><span class="sc11">omega</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"RECT_W: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">RECT_W</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"RECT_H: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">RECT_H</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"INCLINATION (rad): "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">INCLINATION</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"TIME: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"time_w: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">time_side</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"time_h: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">time_side</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"distance: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">distance</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"theta: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">theta</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"beta: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">beta</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"alpha: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">alpha</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//find diagonal opposite corner coordinates using rotation matrix
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">first_corn_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">beta</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">first_corn_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">beta</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">RECT_H</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">diag_op_corn_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">hyp</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">diag_op_corn_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">INCLINATION</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">hyp</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">third_corn_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">alpha</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">third_corn_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">alpha</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">RECT_W</span><span class="sc10">));</span><span class="sc0">

   
   </span><span class="sc2">//pixel coordinates   
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">corners</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc0">
                  </span><span class="sc11">coordPx2Ft</span><span class="sc10">(</span><span class="sc11">first_corn_x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">first_corn_y</span><span class="sc10">),</span><span class="sc0"> 
                  </span><span class="sc11">coordPx2Ft</span><span class="sc10">(</span><span class="sc11">diag_op_corn_x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">diag_op_corn_y</span><span class="sc10">),</span><span class="sc0">
                  </span><span class="sc11">coordPx2Ft</span><span class="sc10">(</span><span class="sc11">third_corn_x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">third_corn_y</span><span class="sc10">),</span><span class="sc0">
                  </span><span class="sc11">coordPx2Ft</span><span class="sc10">(</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">)</span><span class="sc0">
                 </span><span class="sc10">];</span><span class="sc0">

   </span><span class="sc2">//construct the waypoint data
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">corners</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">waypoint</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
      </span><span class="sc11">waypoint</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">corners</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">]);</span><span class="sc0">  </span><span class="sc2">//x
</span><span class="sc0">      </span><span class="sc11">waypoint</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">corners</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">]);</span><span class="sc0">  </span><span class="sc2">//y
</span><span class="sc0">      </span><span class="sc11">waypoint</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">time_side</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">%</span><span class="sc4">2</span><span class="sc10">]);</span><span class="sc0"> </span><span class="sc2">//time
</span><span class="sc0">      </span><span class="sc11">waypoint</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc4">0</span><span class="sc10">);</span><span class="sc0">              </span><span class="sc2">//orientation
</span><span class="sc0">
      </span><span class="sc11">pushAndDrawWaypoint</span><span class="sc10">(</span><span class="sc11">waypoint</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speedLimit</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc11">animatePointExecution</span><span class="sc10">(</span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc4">0</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc4">3</span><span class="sc10">]);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end animateRectangle
</span><span class="sc0">
</span><span class="sc1">/* @brief Animate the vehicle given point execution parameters
 * @param x The destination x coordinate
 * @param y The destination y coordinate
 * @param time The value that the user entered for time
 * @param orientation The orientation that the vehicle will be at the 
 * destination
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">animatePointExecution</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">orientation</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">determineWaypointData</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">orientation</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">status</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">animPointExecution</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Animating Point Execution"</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_speed"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=(</span><span class="sc11">SPEED</span><span class="sc10">).</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end animatePointexecution
</span><span class="sc0">
</span><span class="sc1">/* @brief Get waypoint animation data prior to execution
 * @param x The destination x coordinate
 * @param y The destination y coordinate
 * @param time The value that the user entered for time
 * @param orientation The orientation that the vehicle will be at the 
 * @return true if waypoint is valid, false otherwise
 * destination
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">determineWaypointData</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">orientation</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//determine the direction to the end point
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">whereAmI_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">whereAmI_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-(</span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">));</span><span class="sc0"> </span><span class="sc2">//negate y
</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">whereAmI_x</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">whereAmI_y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_y</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"x:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"y:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"whereAmI_x:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">whereAmI_x</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"whereAmI_y:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">whereAmI_y</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"whereAmIGoing_x:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_x</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"whereAmIGoing_y:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">whereAmIGoing_y</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"deltaX:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"deltaY:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">deltaY</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"time:"</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">time</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//determine how the sign of x and y will change
</span><span class="sc0">   </span><span class="sc11">setSign</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">deltaY</span><span class="sc10">);</span><span class="sc0">

   </span><span class="sc2">//set animation variable for time
</span><span class="sc0">   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">parseFloat</span><span class="sc10">(</span><span class="sc11">time</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc2">//avoid divide by zero!
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is movement in both x and y direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc10">/</span><span class="sc11">deltaX</span><span class="sc10">);</span><span class="sc0">
         </span><span class="sc2">//use Pythagoras' Theorem to get the distance to travel
</span><span class="sc0">         </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sqrt</span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">pow</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc10">,</span><span class="sc4">2</span><span class="sc10">));</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">  
         </span><span class="sc2">//there is only movement in the x direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//there is only movement in the y direction
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">atan</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc10">/</span><span class="sc11">deltaX</span><span class="sc10">);</span><span class="sc0">
         </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">deltaY</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">  
         </span><span class="sc2">//there is no movement
</span><span class="sc0">         </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc2">//calculate the drive speed in ft/sec to destination
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">abs</span><span class="sc10">(</span><span class="sc11">distance</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//Debug
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">deltaY</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"distance: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">distance</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"DIRECTION: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">DIRECTION</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"TIME: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">console</span><span class="sc10">.</span><span class="sc11">log</span><span class="sc10">(</span><span class="sc6">"SPEED: "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc2">//determine rotation rate
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">orientation</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">orientation</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">TIME</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">speedLimit</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Finished, Reload"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end determineWaypointData
</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">speedLimit</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">MAX_SPEED</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"The vehicle would travel at "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">SPEED</span><span class="sc10">.</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" ft/sec given the configuration that you entered. Unfortunately, the max speed of the vehicle is "</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">MAX_SPEED</span><span class="sc10">.</span><span class="sc11">toFixed</span><span class="sc10">(</span><span class="sc11">NUM_DEC_PLACES</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc6">" ft/sec. Try again."</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Invalid Input"</span><span class="sc10">;</span><span class="sc0">      
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Implementation of forward kinematic equation
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">forwardKinematic</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//determine x and y component of velocity using forward kinematic equation
</span><span class="sc0">   </span><span class="sc2">//as well as rotation
</span><span class="sc0">   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">matrix_mult_x</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">matrix_mult_y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">matrix_mult_w</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">matrix_mult_x</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">forward_kinematic</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">matrix_mult_y</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">forward_kinematic</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">matrix_mult_w</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">forward_kinematic</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">wheel_rotations</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RADIUS</span><span class="sc10">/</span><span class="sc4">4</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">matrix_mult_x</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RADIUS</span><span class="sc10">/</span><span class="sc4">4</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">matrix_mult_y</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">Vw</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">RADIUS</span><span class="sc10">/</span><span class="sc4">4</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">matrix_mult_w</span><span class="sc10">;</span><span class="sc0">

  </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">Vx</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Vw</span><span class="sc10">];</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">   

</span><span class="sc1">/* @brief Implementation of inverse kinematic equation
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">inverseKinematic</span><span class="sc10">(</span><span class="sc11">vx</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">vy</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc11">vx</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">vy</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">w</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">wheel_rot</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">];</span><span class="sc0">
   
   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">wheel_rot</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inverse_kinematic</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">wheel_rot</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inverse_kinematic</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">wheel_rot</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inverse_kinematic</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
      </span><span class="sc11">wheel_rot</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">inverse_kinematic</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">][</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">arr</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">];</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">wheel_rot</span><span class="sc10">.</span><span class="sc11">lenght</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">wheel_rot</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*=</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">/</span><span class="sc11">RADIUS</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">wheel_rot</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Determine what value to give the x and y multipliers. These
 * multipliers will be used to increase or decrease the x and y 
 * coordinates of the vehicle during animation.
 * @note The delta values are in pixels where y increases down and x
 * increases right.
 * @param deltaX The requested change in x
 * @param deltaY The requested change in y
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">setSign</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">deltaY</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc2">//1st quadrant
</span><span class="sc0">  </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
     </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
     </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc2">//2nd quadrant
</span><span class="sc0">  </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
     </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
     </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc2">//3rd quadrant
</span><span class="sc0">  </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
     </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
     </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc2">//4th quadrant
</span><span class="sc0">  </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
     </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
     </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc5">else</span><span class="sc0">
  </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaY</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">deltaX</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
         </span><span class="sc10">{</span><span class="sc0">
            </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
         </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc10">}</span><span class="sc0">
      </span><span class="sc5">else</span><span class="sc0">
      </span><span class="sc10">{</span><span class="sc0">
         </span><span class="sc2">//impossible
</span><span class="sc0">      </span><span class="sc10">}</span><span class="sc0">
  </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Adjust for upper-left origin canvas coordinate system
 * @note The delta values are in pixels where y increases down and x
 * increases right.
 * @param deltaX The requested change in x
 * @param deltaY The requested change in y
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">setSignMecanum</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">DIRECTION</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">90</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc5">else</span><span class="sc0"> </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">Vx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc11">Vy</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc4">270</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end setSignMecanum
</span><span class="sc0">
</span><span class="sc1">/* @brief Reposition viewable area when vehicle reference point travels within
 * 3 feet of screen edge
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">checkRepositionView</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0"> 
   </span><span class="sc2">//determine buffer planes
</span><span class="sc0">   </span><span class="sc11">brx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">bry</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">blx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">bly</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">btx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">bty</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">bbx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">sin</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">
   </span><span class="sc11">bby</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">cos</span><span class="sc10">(</span><span class="sc11">toRadians</span><span class="sc10">(</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">getRotation</span><span class="sc10">()))</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">BUFFER</span><span class="sc10">));</span><span class="sc0">

</span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">DEBUG</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">a</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">brx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">a</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">bry</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">b</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">blx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">b</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">bly</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">c</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">btx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">c</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">bty</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">d</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">bbx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">d</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">bby</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">blx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_LEFT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">brx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_LEFT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">btx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_LEFT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bbx</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_LEFT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
      </span><span class="sc11">blx</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_RIGHT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">brx</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_RIGHT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">btx</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_RIGHT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bbx</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_RIGHT</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> 
      </span><span class="sc11">bly</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_BOTTOM</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bry</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_BOTTOM</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bty</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_BOTTOM</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bby</span><span class="sc0"> </span><span class="sc10">&gt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_BOTTOM</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0">
      </span><span class="sc11">bly</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_TOP</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bry</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_TOP</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bty</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_TOP</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">bby</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">BOUNDS_TOP</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">repositionView</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end checkRepositionView
</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">repositionView</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//update the global vehicle reference coordinates
</span><span class="sc0">   </span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">CANVAS_X</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">+=</span><span class="sc0"> </span><span class="sc11">CANVAS_Y</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">diffx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">x</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">diffy</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">y</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//center the vehicle
</span><span class="sc0">   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">CENTER_X</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">CENTER_Y</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">pathx</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">x</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">diffx</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">pathy</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">getPosition</span><span class="sc10">().</span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">diffy</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">pathx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">pathy</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">points</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">getPoints</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathx</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new x point 
</span><span class="sc0">   </span><span class="sc11">points</span><span class="sc10">.</span><span class="sc11">push</span><span class="sc10">(</span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pathy</span><span class="sc10">);</span><span class="sc0"> </span><span class="sc2">// new y point
</span><span class="sc0">   </span><span class="sc11">done</span><span class="sc10">.</span><span class="sc11">setPoints</span><span class="sc10">(</span><span class="sc11">points</span><span class="sc10">);</span><span class="sc0">
   
   </span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">setX</span><span class="sc10">(</span><span class="sc11">pathx</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">setY</span><span class="sc10">(</span><span class="sc11">pathy</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//pathLayer.removeChildren();
</span><span class="sc0">   </span><span class="sc11">waypointLayer</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">donePoints</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[[</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">]];</span><span class="sc0">
   </span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">

</span><span class="sc1">/* @brief Convert feet x, y to pixels x, y 
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">coordFt2Px</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pxX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_X</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">);</span><span class="sc0"> 
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">pxY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">y</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">px</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
   </span><span class="sc11">px</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pxX</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">px</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pxY</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">px</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end coordFt2Px
</span><span class="sc0">
</span><span class="sc1">/* @brief Convert pixels x, y to feet x, y 
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">coordPx2Ft</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">ftX</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">CENTER_X</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">x</span><span class="sc10">);</span><span class="sc0"> 
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">ftY</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">CENTER_Y</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">y</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">ft</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
   </span><span class="sc11">ft</span><span class="sc10">[</span><span class="sc4">0</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ftX</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">ft</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">ftY</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">ft</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end coordPx2Ft
</span><span class="sc0">
</span><span class="sc1">/* @brief Helper function to convert an angle in degrees to radians
 * @param angle The angle to be converted to radians
 * @return The angle in radians
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">toRadians</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">angle</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">PI</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">180</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end toRadians
</span><span class="sc0">
</span><span class="sc1">/* @brief Helper function to convert an angle in radians to degrees
 * @param angle The angle to be converted to degrees
 * @return The angle in radians
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">toDegrees</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
  </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">angle</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc4">180</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">Math</span><span class="sc10">.</span><span class="sc11">PI</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end toRadians
</span><span class="sc0">
</span><span class="sc1">/* @brief Helper function to convert feet to pixels
 * @param feet The number of feet
 * @return Number of pixels in feet
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">feetToPixels</span><span class="sc10">(</span><span class="sc11">feet</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">feet</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc11">WIDTH_FT</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end feetToPixels
</span><span class="sc0">
</span><span class="sc1">/* @brief Helper function to convert pixels to feet
 * @param pixels The number of pixels
 * @return Number of pixels in feet
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">pixelsToFeet</span><span class="sc10">(</span><span class="sc11">pixels</span><span class="sc10">)</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">pixels</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">WIDTH_PX</span><span class="sc10">/</span><span class="sc11">WIDTH_FT</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end pixelsToFeet
</span><span class="sc0">
</span><span class="sc1">/* @brief Reload the page
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">reload</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc11">getInput</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">location</span><span class="sc10">.</span><span class="sc11">reload</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end reload
</span><span class="sc0">
</span><span class="sc1">/* @brief Resets the page
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">reset</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//reset variables
</span><span class="sc0">   </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">TIME</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">ORIENTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">GLOBAL_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">GLOBAL_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">CANVAS_X</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">CANVAS_Y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">X_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">Y_MULT</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">1</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">CIRCLE_RADIUS</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">INCLINATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">RECT_W</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">RECT_H</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">recentered</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">frames</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc2">//number of frames executed
</span><span class="sc0">   </span><span class="sc11">donePoints</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[[</span><span class="sc11">CENTER_X</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">CENTER_Y</span><span class="sc10">]];</span><span class="sc0">
   
   </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Not Animating"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">anim</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">animCircle</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">animPointExecution</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//delete waypoint rows
</span><span class="sc0">   </span><span class="sc5">for</span><span class="sc10">(</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc0"> </span><span class="sc10">&lt;</span><span class="sc0"> </span><span class="sc11">waypoints</span><span class="sc10">.</span><span class="sc11">length</span><span class="sc10">;</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">++)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc2">//delete the first row
</span><span class="sc0">      </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"waypoints"</span><span class="sc10">).</span><span class="sc11">deleteRow</span><span class="sc10">(</span><span class="sc4">1</span><span class="sc10">);</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   </span><span class="sc11">waypoints</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">[];</span><span class="sc0">
   </span><span class="sc11">cur_waypoint</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//reposition vehicle
</span><span class="sc0">   </span><span class="sc11">resetAnim</span><span class="sc10">.</span><span class="sc11">start</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">resetAnim</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   
   </span><span class="sc2">//clear input
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"direction"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"speed"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"rotation"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"pointX"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"pointY"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"time"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"orientation"</span><span class="sc10">).</span><span class="sc11">value</span><span class="sc10">=</span><span class="sc6">""</span><span class="sc10">;</span><span class="sc0">
   
   </span><span class="sc2">//clear info
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"x_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"0.00"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"y_coord"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"0.00"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_speed"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"0.00"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_time"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"0.00"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"cur_rot"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"0.00"</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc2">//update state
</span><span class="sc0">   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"Not Animating"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end reset
</span><span class="sc0">
</span><span class="sc3">/****************************
 *
 * Main
 *
 ****************************/</span><span class="sc0">
 
 </span><span class="sc2">//set input fields with any previous values
</span><span class="sc0"> </span><span class="sc11">setInput</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">//draw grid
</span><span class="sc11">drawGridlines</span><span class="sc10">();</span><span class="sc0">

</span><span class="sc2">//draw vehicle
</span><span class="sc5">var</span><span class="sc0"> </span><span class="sc11">imageObj</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">new</span><span class="sc0"> </span><span class="sc11">Image</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">imageObj</span><span class="sc10">.</span><span class="sc11">src</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"car.png"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc11">imageObj</span><span class="sc10">.</span><span class="sc11">onload</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">function</span><span class="sc10">()</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
    </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">setFillPatternImage</span><span class="sc10">(</span><span class="sc11">imageObj</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">fillPatternScaleX</span><span class="sc10">(</span><span class="sc11">VEHICLE_WIDTH_PX</span><span class="sc10">/</span><span class="sc4">100</span><span class="sc10">);</span><span class="sc0">
    </span><span class="sc11">rect</span><span class="sc10">.</span><span class="sc11">fillPatternScaleY</span><span class="sc10">(</span><span class="sc11">VEHICLE_HEIGHT_PX</span><span class="sc10">/</span><span class="sc4">200</span><span class="sc10">);</span><span class="sc0">
   
    </span><span class="sc11">stage</span><span class="sc10">.</span><span class="sc11">draw</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0">
</span><span class="sc11">drawVehicle</span><span class="sc10">();</span><span class="sc0">
</span><span class="sc11">stage</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">waypointLayer</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc11">pathLayer</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">done</span><span class="sc10">);</span><span class="sc0">
</span><span class="sc11">stage</span><span class="sc10">.</span><span class="sc11">add</span><span class="sc10">(</span><span class="sc11">pathLayer</span><span class="sc10">);</span><span class="sc0">

</span><span class="sc3">/****************************
 *
 * Listeners
 *
 ****************************/</span><span class="sc0">
 
</span><span class="sc1">/* @brief Detect a key press and stop animation
 */</span><span class="sc0">
</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">onkeypress</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc6">"vref"</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc6">"mecanum"</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">notAnimating</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">//end key press
</span><span class="sc0">
</span><span class="sc1">/* @brief Detect a mouse click and stop animation
 */</span><span class="sc0">
</span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">onclick</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc5">function</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">e</span><span class="sc10">)</span><span class="sc0"> 
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//if click is not on a button, stop the animation
</span><span class="sc0">   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">e</span><span class="sc10">.</span><span class="sc11">target</span><span class="sc10">.</span><span class="sc11">id</span><span class="sc0"> </span><span class="sc10">!=</span><span class="sc0"> </span><span class="sc6">"button"</span><span class="sc0"> </span><span class="sc10">&amp;&amp;</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc6">"vref"</span><span class="sc0"> </span><span class="sc10">||</span><span class="sc0"> </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc6">"mecanum"</span><span class="sc10">))</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
     </span><span class="sc11">notAnimating</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
</span><span class="sc10">};</span><span class="sc0"> </span><span class="sc2">//end mouse click
</span><span class="sc0">
</span><span class="sc1">/* @brief Stop the animation
 */</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">notAnimating</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc2">//clear animation variables
</span><span class="sc0">   </span><span class="sc11">DIRECTION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">SPEED</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">ROTATION</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc4">0</span><span class="sc10">;</span><span class="sc0">

   </span><span class="sc2">//set animation state to not animating 
</span><span class="sc0">   </span><span class="sc11">anim</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">animPointExecution</span><span class="sc10">.</span><span class="sc11">stop</span><span class="sc10">();</span><span class="sc0">
   </span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc11">document</span><span class="sc10">.</span><span class="sc11">getElementById</span><span class="sc10">(</span><span class="sc6">"state"</span><span class="sc10">).</span><span class="sc11">innerHTML</span><span class="sc10">=</span><span class="sc6">"'Stop' Command Received"</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc2">//end notAnimating
</span><span class="sc0">
</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">checkReload</span><span class="sc10">()</span><span class="sc0">
</span><span class="sc10">{</span><span class="sc0">
   </span><span class="sc5">if</span><span class="sc10">(</span><span class="sc11">animating</span><span class="sc0"> </span><span class="sc10">==</span><span class="sc0"> </span><span class="sc6">"reload"</span><span class="sc10">)</span><span class="sc0">
   </span><span class="sc10">{</span><span class="sc0">
      </span><span class="sc11">alert</span><span class="sc10">(</span><span class="sc6">"Please click Reset to perform another simulation."</span><span class="sc10">);</span><span class="sc0">
      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">true</span><span class="sc10">;</span><span class="sc0">
   </span><span class="sc10">}</span><span class="sc0">
   
   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc5">false</span><span class="sc10">;</span><span class="sc0">
</span><span class="sc10">}</span></div></body>
</html>
